---
{"dg-publish":true,"permalink":"/01-note/c/c/"}
---

# C语言操作符总结


## 一、算数运算符

![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221214143830.png)


### 1.1 四则运算和取余

1. 除了 `%` 操作符之外，其他的几个操作符可以作用于整数和浮点数  
2. 对于 `/` 操作符如果两个操作数都为整数，执行整数除法（求商舍余）。而只要有浮点数，执行的就是浮点数除法。  
3. `%` (取模)操作符的<font color="#ff0000">两个操作数必须为整数</font>，若其中一个不为整数则报错，返回的是整除之后的余数。

```c
#include<stdio.h>
int main()
{
	int a = 5;
	int b = 2;
	int c = 0;
	printf("a+b = %d\n", a + b);//相加
	printf("a-b = %d\n", a - b);//相减
	printf("a*b = %d\n", a * b);//相乘
	printf("a/b = %d\n", a / b);//求商
	printf("a%%b = %d\n", a % b);//取模
	return 0;
}

```

![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221029135502.png)

```c
#include <stdio.h>
int main()
{
	/*double a = 5.0 / 2;*/
	double a = 5 % 2.0;//报错
	printf("a = %lf", a);
	return 0;
}

```

### 1.2 自增和自减

如果单独写自增运算符为一个语句，二者没有区别
`++i;` 和` i++;` 都是让 i+1 赋值给 i

但是 `++` 和 `--` 在变量前后的时候，则是会有不同

`++`在前
例如:   `++a;`
说明: `++` 在前时，b 会先自加 1，然后才赋值给 a

```c
int a, b = 1;
a = ++b;        //b增加至2，a得到的值为2
```

`++`在后
例如:   `a++;`
说明: `++` 在后时，b 赋值给 a，再进行自加

```c
int a, b = 1;
a = b++;        //b增加至2，a得到的值为1
```

在操作数之前的操作符 (`++b`) 在变量值在被使用之前增加它的值；在操作数之后的操作符 (`b++`) 在变量值被使用之后才增加的值。

**注意：**

`++a` 与 `a++` 不能被赋值 ，因为他们本身只是拷贝了变量的值，并不是变量本身，你无法向一个值进行赋值

```c
int a = 1;
++a = 5;//错误用法
```

这样子是错误的！

## 二、移位操作符


![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221214144109.png)


### 2.1 布尔位运算

#### 2.1.1 位与 “&”

##### 1. 简介

按位“与”`&`（双目运算符）：仅当两个操作数都为1时，结果为1，否则为0。参与运算的数以补码方式出现。因**为计算机是以补码形式存储数据的**。

##### 2. 用法举例

例：`9&5=1`

```
		0000 1001-------------      9的补码

&   0000 0101-------------    	5的补码

		----------

		0000 0001-------------      1的补码
```

##### 3. 应用：

a、通常将某些位清零或保留某些位。

例如：

将a的高八位清零，保留低八位，可做 `a&255` 运算。

```
      00000000 11111111—————— 255的二进制数

&     00000000 00100000—————— a的二进制数

     ------------------

      00000000 00100000
```

将字符“A”的低四位清零，保留高四位，可以做 `“A”&240( 0xf0)`

```
		0100 0001‬——————“A”的二进制数

   	1111 0000‬——————240的二进制数

    ------------------

   	0100 0000      保留了“A”的高四位
```

b、取某数的指定位。

例如：

设 a=1000 1110，要取出 a 中第二位的 1，则可以用 `a & 0000 0010` 实现

#### 2.1.2 位或 “|”

##### 1. 简介

按位“或”`|`（双目运算符）：仅当两个操作数都为0时，结果为0，否则为1。

##### 2. 用法举例

例：`9|5=13`

```
			0000 1001------------- 9的补码

	|   0000 0101------------- 5的补码

      ----------

      0000 1101------------- 13的补码
```

##### 3. 应用

常用来将原操作数某些位置1。例如：设 a=0100 0001，将低四位全部置1，则可以用 `a | 0000 1111` 实现。

#### 2.1.3 异或 “^”

##### 1. 简介
符号“ `∧` ”表示“按位异或”运算符。

按位“异或”`^`（双目运算符）：参加运算的两个运算量，如果两个数的相应位的值不同，则该位的结果值为 1，否则为 0。即：`0 ^ 0 =0；0 ^ 1 =1；1 ^ 0 =1；1 ^ 1 =0`

1.  第一步先转换为二进制
2.  第二步对每位进行比较，相同为0，不同为1
 
##### 2. 用法举例 

例1： `9^5=12`

```
    0000 1001------------- 9的补码

 ^  0000 0101------------- 5的补码

    ----------

		0000 1101------------- 12的补码
```

例2：

```c
int m = 33, n = 66;
m = m^n;
n = n^m;
m = m^n;
printf("%d,%d",m,n); //运行结果为66，33
```

##### 3. 应用

应用：

a、特定位置取反。例如：设a=1001,将第2位取反，则可以用 `a ^1011` 实现。

b、不引入第三变量，交换两个数的值。

例：a=1,b=2,交换两个数的值

```c
a=a^b;                 

b=a^b;              

a=a^b;  
```              


#### 2.1.4 按位取反 “~”

##### 1. 简介

`~`：一种单目操作符，即对一个数的二进制按位取反。

按（二进制）位取反，即把所有二进制位（包括符号位）中数字，1 变成 0，0 变成 1。

##### 2. 用法举例

由于整数在内存中存储的是补码，故使用 "`~`"（按位取反）时需要转化为补码进行运算。此时，得到的结果仍为补码，需要进一步转化为原码，得到最终输出值。原码和补码请看[【笔记】原码与补码](【笔记】原码与补码.md)。

a、正整数

例如

```
1：

00000000 00000000 00000000 00000001（补码）

~1：

11111111 11111111 11111111 11111110（补码）

11111111 11111111 11111111 11111101（反码）

10000000 00000000 00000000 00000010（原码）
```

即`~ 1` 的输出结果为 - 2

代码如下：

```c
#include <stdio.h>
int main()
{
	int a = 1;
	printf("%d\n", ~a);
	return 0;
}
```

输出结果：-2

b、负整数

例如

```
-1：

11111111 11111111 11111111 11111111（补码）

~-1：

00000000 00000000 00000000 00000000（补码）

00000000 00000000 00000000 00000000（反码）

00000000 00000000 00000000 00000000（原码）
```

即`~-1` 的输出结果为 0

代码如下：

```c
#include <stdio.h>
int main()
{
	int a = -1;
	printf("%d\n", ~a);
	return 0;
}
```

输出结果：0

c、零

由于正零与负零的补码相同，故不加以区分。

```
0：

00000000 00000000 00000000 00000000（补码）

~0：

11111111 11111111 11111111 11111111（补码）

11111111 11111111 11111111 11111110（反码）

10000000 00000000 00000000 00000001（原码）

```

即`~ 0` 的输出结果为 - 1

代码如下：

```c
#include <stdio.h>
int main()
{
	int a = 0;
	printf("%d\n", ~a);
	return 0;
}
```

输出结果：-1

### 2.2 移位位运算

#### 2.2.3 左移 "<<"

左移运算 `<<`（丢弃最高位，0补最低位）:把一个数的所有位都向左移动若干位。

例如：

```c
int i=1；
i=i<<2;    //这表示将i里的值左移两位。   
```

分析：1的2进制是 000...0001 (这里 1 前面 0 的个数和 int 的位数有关, 32 位机器，gcc 里有 31 个 0)，左移 2 位之后变成 000... 0100，也就是 10 进制的 4，所以说左移 1 位相当于乘以 2，那么<font color="#ff0000">左移 n 位就是乘以 2 的 n 次方了</font>（注：有符号数不完全适用）

#### 2.2.3 右移 ">>"

右移运算 `>>` :把一个数的所有位都向右移动若干位。

例如：

```c
int i = 0x80000000;
i = i >> 1;  //i的值不会变成0x40000000,而会变成0xc0000000
```

分析：符号位向右移动后,正数的话补0,负数补1,也就是汇编语言中的算术右移。同样当移动的位数超过类型的长度时,会取余数,然后移动余数个位。

## 三、复合赋值符

### 3.1 简单赋值操作符

赋值操作符 =（注意：一个等号 = 表示赋值，两个等号 == 表示条件判断）  
通过赋值操作符，我们可以给初始变量赋值，变更调整变量的值（也就是重新给变量赋值）  

例如：

```c
int weight = 80;//单位kg 
weight = 60;//对80不满意，重新赋值成60
double salary = 10000.0;
salary = 30000.0;//对salary只有10000.0不满意，变成30000.0
//赋值操作符也可以连续使用，比如
int a = 10;
int x = 0;
int y = 20;
a = x = y + 1; //连续赋值  //赋值操作符是从右往左计算的
//等同于：
x = y + 1;
a = x;

```

一般我们都是用分开的形式，不用连续赋值的形式，因为分开表示的方法更加容易阅读和理解，且易于调试。

### 3.2 复杂赋值操作符

常见的复杂赋值操作符如下图所示

![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221029140659.png)

![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221029140722.png)

例1：  

```c
int x = 10;  
x = x + 10;  //等同于：x += 10;
```

例2:

```c
#include<stdio.h>
int main()
{
	int a = 1;
	printf("%d\n", a += 1);
	printf("%d\n", a -= 1);
	printf("%d\n", a *= 2);
	printf("%d\n", a /= 2);
	printf("%d\n", a %= 2);
	printf("%d\n", a <<= 1);
	printf("%d\n", a >>= 1);
	printf("%d\n", a &= -1);
	printf("%d\n", a |= 1);
	printf("%d\n", a ^= 1);
	return 0;
}

```

![](https://photo-1308666018.cos.ap-chengdu.myqcloud.com/photo/20221029182629.png)



## 参考文章

1. [原码与补码](原码与补码.md)
2. [【文章】C语言：“~” 操作符详解语言](【文章】C语言：“~”%20操作符详解语言.md)